{
    "@extends": {
        "ScriptedCloud": "{{__DIRNAME__}}/../03-pinf.tools.ScriptedCloud/PINF.proto.json"
    },
    "config": {
        "ScriptedCloud.PINF.Tools/0": {
            "topLevelDomain": "pinf.io",
            "hostname": "{{env.PGS_WORKSPACE_UID}}.vm.pinf.io",
            "dirname": "vm.pinf.io~{{env.PGS_WORKSPACE_UID}}",
            "privateKeyPath": "{{env.HOME}}/.ssh/vm.pinf.io-{{env.PGS_WORKSPACE_UID}}.rsa"
        },
        "ScriptedCloud.PINF.Tools/boot/0": {
            "$depends": [
                "pio-deploy-services",
                "local-proxy"
            ],
            "$depends_DISABLED": [
                "pio-deploy-devtools"
            ]
        },
        "github.com/pinf-to/pinf-to-process/0": {
            "$to": {
                "local-proxy": {
                    "basePath": "{{__DIRNAME__}}/.deps/github.com~pinf-io~io.pinf.proxy~0/source/installed/master",
                    "commands": {
                        "start": "node server.js"
                    },
                    "boot": {
                        "config": "io.pinf.proxy/0"
                    },
                    "config": {
                        "io.pinf.proxy/0": {
                            "port": 8081,
                            "host": "127.0.0.1"
                        }
                    }
                }
            }
        },
        "github.com/pinf-to/pinf-to-openshift/0": {
            "openshift": {
                "cartridge": "{{__DIRNAME__}}/.deps/github.com~pinf-io~pinf.io-for-openshift~0/source/installed/master"
            }
        },
        "github.com/pinf-io/io.pinf.pio.deploy/0": {
            "$to": {
                "pio-deploy-services": {
                    "ssh": {
                        "ip": "{{$from.server-services.vm.ip}}",
                        "user": "{{$from.server-services.dropplet.sshUser}}",
                        "privateKeyPath": "{{$from.server-services.dropplet.keyPath}}"
                    },
                    "env": "{{$from.server-services.env}}",
                    "adapters": {
                        "os": "pinf.io-for-ubuntu"
                    },
                    "services": {
                        "bash.origin": {
                            "location": "bash.origin"
                        },
                        "pinf.io-for-ubuntu": {
                            "depends": [
                                "bash.origin"
                            ],
                            "location": "pinf.io-for-ubuntu",
                            "config": {
                                "pio.pinf.io/0": {
                                    "on": {
                                        "postactivate": "bin/install"
                                    }
                                }
                            }
                        },
                        "pinf-it-package-insight": {
                            "depends": [
                                "pinf.io-for-ubuntu"
                            ],
                            "location": "pinf-it-package-insight"
                        },
                        "smi-for-npm": {
                            "depends": [
                                "pinf.io-for-ubuntu",
                                "bash.origin",
                                "pinf-it-package-insight"
                            ],
                            "location": "smi-for-npm",
                            "config": {
                                "pio.pinf.io/0": {
                                    "on": {
                                        "postactivate": [
                                            "bin/link-to $PIO_BIN_DIRPATH/smi-for-npm",
                                            "smi-for-npm relink"
                                        ]
                                    }
                                }
                            }
                        },
                        "org.pinf.lib": {
                            "depends": [
                                "smi-for-npm"
                            ],
                            "location": "org.pinf.lib"
                        },
                        "org.pinf.genesis.lib": {
                            "depends": [
                                "org.pinf.lib"
                            ],
                            "location": "org.pinf.genesis.lib"
                        },
                        "pinf.io-for-unix": {
                            "depends": [
                                "bash.origin",
                                "org.pinf.genesis.lib"
                            ],
                            "location": "pinf.io-for-unix",
                            "config": {
                                "org.pinf.genesis.lib/0": {
                                    "api": {
                                        "consumes": {
                                            "FLAVOR": "pinf.io-for-ubuntu/0/manifested-os"
                                        }
                                    }
                                }
                            }
                        },
                        "io.pinf.pio.postsync": {
                            "depends": [
                                "bash.origin",
                                "pinf.io-for-unix",
                                "org.pinf.genesis.lib"
                            ],
                            "location": "io.pinf.pio.postsync",
                            "config": {
                                "org.pinf.genesis.lib/0": {
                                    "api": {
                                        "consumes": {
                                            "OS": "pinf.io-for-unix/0/virtual-os"
                                        }
                                    }
                                }
                            }
                        },
                        "io.pinf.proxy": {
                            "depends": [
                                "io.pinf.pio.postsync"
                            ],
                            "location": "io.pinf.proxy",
                            "boot": {
                                "config": "io.pinf.proxy/0"
                            },
                            "config": {
                                "io.pinf.proxy/0": {
                                    "port": 8085,
                                    "host": "127.0.0.1"
                                }
                            }
                        }
                    }
                },
                "pio-deploy-devtools": {
                    "ssh": {
                        "uri": "{{$from.server-devtools.app.ssh}}",
                        "privateKeyPath": "{{$from.server-devtools.openshift.privateKeyPath}}"
                    },
                    "env": "{{$from.server-devtools.env}}",
                    "services": {
                        "bash.origin": {
                            "location": "bash.origin"
                        },
                        "io.pinf.pio.postsync": {
                            "depends": [
                                "bash.origin"
                            ],
                            "location": "io.pinf.pio.postsync"
                        },
                        "io.pinf.proxy": {
                            "depends": [
                                "io.pinf.pio.postsync"
                            ],
                            "location": "io.pinf.proxy"
                        }
                    }
                }
            }
        }
    },
    "mappings": {
        "io.pinf.proxy": {
            "location": "{{__DIRNAME__}}/.deps/github.com~pinf-io~io.pinf.proxy~0/source/installed/master",
            "install": true
        },
        "io.pinf.pio.postsync": {
            "depends": [
                "bash.origin"
            ],
            "location": "{{__DIRNAME__}}/.deps/github.com~pinf-io~io.pinf.pio.postsync~0/source/installed/master",
            "install": true
        },
        "io.pinf.pio.sync": {
            "depends": [
                "io.pinf.pio.postsync",
                "io.pinf.proxy",
                "bash.origin",
                "org.sourcemint.genesis.lib"
            ],
            "location": "{{__DIRNAME__}}/.deps/github.com~pinf-io~io.pinf.pio.sync~0/source/installed/master",
            "install": true
        },
        "pinf.io-for-openshift": {
            "depends": [
                "io.pinf.pio.postsync",
                "io.pinf.proxy",
                "bash.origin"
            ],
            "location": "{{__DIRNAME__}}/.deps/github.com~pinf-io~pinf.io-for-openshift~0/source/installed/master",
            "install": true
        },
        "pinf.io-for-ubuntu": {
            "depends": [
                "bash.origin"
            ],
            "location": "{{__DIRNAME__}}/.deps/github.com~pinf-io~pinf.io-for-ubuntu~0/source/installed/master",
            "install": true
        },
        "pinf.io-for-unix": {
            "depends": [
                "bash.origin",
                "org.pinf.genesis.lib"
            ],
            "location": "{{__DIRNAME__}}/.deps/github.com~pinf-io~pinf.io-for-unix~0/source/installed/master",
            "install": true
        },
        "pinf-to-process": {
            "location": "{{__DIRNAME__}}/.deps/github.com~pinf-to~pinf-to-process~0/source/installed/master",
            "install": true
        }
    },
    "@overlays": [
        "{{env.PIO_PROFILE_PATH}}"
    ]
}